# Simple API Service Manifest
# Generated by Shinobi Platform Intelligence

service: simple-api
owner: development-team
complianceFramework: commercial
environment: development

# Components
components:
  # API Gateway and Lambda
  - name: api-gateway
    type: api-gateway-http
    config:
      cors: true
      throttling:
        burstLimit: 1000
        rateLimit: 500

  - name: api-lambda
    type: lambda-api
    config:
      handler: src/api.handler
      runtime: nodejs20.x
      memory: 512
      timeout: 30
      environment:
        NODE_ENV: development
        LOG_LEVEL: debug

  # Database
  - name: database
    type: rds-postgres
    config:
      engine: postgres
      engineVersion: "15.4"
      instanceClass: db.t3.micro
      allocatedStorage: 20
      backupRetentionPeriod: 7
      monitoring:
        enabled: true

  # Monitoring
  - name: monitoring
    type: shinobi
    config:
      observability:
        enabled: true
        traceSamplingRate: 1.0
        metricsInterval: 60

# Component Bindings
bindings:
  - source: api-lambda
    target: database
    type: database-connection
    config:
      connectionType: primary

  - name: api-connection
    source: api-lambda
    target: api-gateway
    type: api-connection
    config:
      connectionType: https
