# IamPolicyComponent Component

IAM Policy Component with comprehensive security, monitoring, and compliance features.

## Overview

The IamPolicyComponent component provides:

- **Production-ready** iam policy component functionality
- **Comprehensive compliance** (Commercial, FedRAMP Moderate/High)
- **Integrated monitoring** and observability
- **Security-first** configuration
- **Platform integration** with other components

### Category: security

### AWS Service: IAM

This component manages IAM resources and provides a simplified, secure interface for common use cases.

## Usage Example

### Basic Configuration

```yaml
service: my-service
owner: platform-team
complianceFramework: commercial

components:
  - name: my-iam-policy
    type: iam-policy
    config:
      description: "Production iam-policy instance"
      monitoring:
        enabled: true
        detailedMetrics: true
```

## Configuration Reference

### Root Configuration

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| `name` | string | No | Component name (auto-generated if not provided) |
| `description` | string | No | Component description for documentation |
| `monitoring` | object | No | Monitoring and observability configuration |
| `logging` | object | No | CloudWatch log group configuration for policy activity |
| `controls` | object | No | Compliance guardrail statements applied to the policy |
| `tags` | object | No | Additional resource tags |

### Monitoring Configuration

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| `enabled` | boolean | No | Enable monitoring (default driven by platform config) |
| `detailedMetrics` | boolean | No | Enable detailed CloudWatch metrics |
| `usageAlarm.enabled` | boolean | No | Enable IAM policy usage alarm |
| `usageAlarm.threshold` | number | No | Sum of policy invocations before alarming |
| `usageAlarm.evaluationPeriods` | number | No | Consecutive periods exceeding the threshold |
| `usageAlarm.periodMinutes` | number | No | Evaluation period length in minutes |
| `usageAlarm.treatMissingData` | enum | No | Alarm behaviour for missing datapoints |

### Logging Configuration

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| `logging.usage.enabled` | boolean | No | Emit usage log group (default per platform config) |
| `logging.usage.retentionInDays` | number | No | Log retention in days |
| `logging.usage.removalPolicy` | enum(`retain`,`destroy`) | No | Removal policy for the usage log group |
| `logging.compliance.enabled` | boolean | No | Emit compliance log group (FedRAMP defaults) |
| `logging.audit.enabled` | boolean | No | Emit long-term audit log group (FedRAMP High) |

### Controls Configuration

| Property | Type | Required | Description |
|----------|------|----------|-------------|
| `controls.denyInsecureTransport` | boolean | No | Adds a deny statement for insecure transport |
| `controls.requireMfaForActions` | string[] | No | Sensitive actions that require MFA |
| `controls.additionalStatements` | object[] | No | Additional policy statements injected by governance |

## Capabilities Provided

This component provides the following capabilities for binding with other components:

- `security:iam-policy` - Main iam-policy capability
- `monitoring:iam-policy` - Monitoring capability

## Construct Handles

The following construct handles are available for use in `patches.ts`:

- `main` - Main iam-policy construct

## Compliance Frameworks

### Commercial

- Standard monitoring configuration
- Basic resource tagging
- Standard security settings

### FedRAMP Moderate/High

- Enhanced monitoring with detailed metrics
- Comprehensive audit logging
- Stricter security configurations
- Extended compliance tagging

## Best Practices

1. **Always enable monitoring** in production environments
2. **Use descriptive names** for better resource identification
3. **Configure appropriate tags** for cost allocation and governance
4. **Review compliance requirements** for your environment
5. **Test configurations** in development before production deployment

## Development

### Running Tests

```bash
# Run all tests for this component
npm test -- --testPathPattern=iam-policy

# Run only builder tests
npm test -- --testPathPattern=iam-policy.builder

# Run only synthesis tests
npm test -- --testPathPattern=iam-policy.component.synthesis
```

---

*Generated by Component Completion Script*
